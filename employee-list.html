<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>员工花名册</title>
</head>
<body>
    <h2>员工花名册</h2>
    <input type="text" id="staffName" placeholder="输入员工姓名">
    <input type="text" id="staffJob" placeholder="输入员工职位">
    <span id="totalCount"> 共 0 条数据</span>
    <h3>添加新员工</h3>
    <button id="addStaffBtn">添加员工</button>
    <input type="text" id="searchStaff" placeholder="搜索姓名或职位...">
    <table id="staffTable">
        <thead>
            <tr>
                <th>ID</th>
                <th>姓名</th>
                <th>岗位</th>
                <th>操作</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
    <script>
        const staffData = [];
        for (let i = 1; i <= 100; i++) {
            staffData.push({id: i, name: `员工${i}`, position: `职位${i}`});
        }
        let currentPage = 1;
        let rowsPerPage = 10;
        let filteredData = [...staffData];

        function displayTable(data, page) {
            const tableBody= document.querySelector("#staffTable tbody");
            tableBody.innerHTML = "";
            document.getElementById('totalCount').textContent = `共 ${data.length} 条数据`;

            const start = (page - 1) * rowsPerPage;
            const end = start + rowsPerPage;
            const pageData = data.slice(start, end);

            for (let staff of pageData) {
                const row = document.createElement("tr");
                row.innerHTML = `
                    <td>${staff.id}</td>
                    <td>${staff.name}</td>S
                    <td>${staff.position}</td>
                    <td>
                        <button class="deleteBtn"  data-id="${staff.id}">删除</button>
                    </td>
                `;
                tableBody.appendChild(row);
            }

            document.querySelectorAll(".deleteBtn").forEach(button => {
                button.addEventListener("click", function() {
                    const id = parseInt(this.dataset.id);
                    const index = staffData.findIndex(staff => staff.id === id);
                    if (index !== -1) staffData.splice(index, 1);
                    const filteredIndex = filteredData.findIndex(staff => staff.id === id);
                    if (filteredIndex !== -1) filteredData.splice(filteredIndex, 1);
                    displayTable(filteredData, currentPage);
                    setupPagination(filteredData);
                })
            });
        }
        
        function setupPagination(data) {
            let pagination = document.getElementById("pagination");
            if (!pagination) {
                pagination = document.createElement("div");
                pagination.id = "pagination";
                document.body.appendChild(pagination);
            }
            pagination.innerHTML = "";

            const pageCount = Math.ceil(data.length / rowsPerPage);
            for (let i = 1; i <= pageCount; i++) {
                const btn = document.createElement("button");
                btn.textContent = i;
                if (i === currentPage) btn.style.fontWeight = "bold";
                btn.addEventListener("click", () => {
                    currentPage = i;
                    displayTable(filteredData, currentPage);
                    setupPagination(filteredData);
                });
                pagination.appendChild(btn);
            }
        }
        document.getElementById("searchStaff").addEventListener("input", function() {
            const keyword = this.value.trim().toLowerCase();
            filteredData = staffData.filter(staff =>
                staff.name.toLowerCase().includes(keyword) ||
                staff.position.toLowerCase().includes(keyword)
            );
            currentPage = 1;
            displayTable(filteredData, currentPage);
            setupPagination(filteredData);
        });

        document.getElementById("addStaffBtn").addEventListener("click", function() {
            const name = document.getElementById("staffName").value.trim();
            const position = document.getElementById("staffJob").value.trim();

            if (!name || !position) {
                alert("姓名和职位不能为空");
                return;
            }

            const newStaff = {
                id: staffData.length + 1,
                name,
                position
            };
            staffData.push(newStaff);
            filteredData = [...staffData];
            currentPage = Math.ceil(filteredData.length / rowsPerPage);

            displayTable(filteredData, currentPage);
            setupPagination(filteredData);

            document.getElementById("staffName").value = "";
            document.getElementById("staffJob").value = "";
        });
        displayTable(filteredData, currentPage);
        setupPagination(filteredData);
    </script>
</body>
</html>